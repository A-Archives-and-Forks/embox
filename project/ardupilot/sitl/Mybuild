package project.ardupilot

@BuildDepends(embox.lib.libstdcxx)
@Build(stage=2, script="$(EXTERNAL_MAKE)")
module sitl_lib {
	source "stubs.c"
	source "^BUILD/extbld/^MOD_PATH/install/libArduCopter_libs.a"
	
	@NoRuntime depends waf
	@NoRuntime depends mavlink
	@NoRuntime depends dsdl
	@NoRuntime depends dronecan_dsdlc
	@NoRuntime depends libcanard
	@NoRuntime depends embox.lib.libstdcxx
	@NoRuntime depends embox.compat.posix.stubs
	@NoRuntime depends embox.compat.posix.ipc.pipe
	@NoRuntime depends embox.compat.posix.proc.fork
}

@AutoCmd
@CxxCmd(name = "ardupilot",
	help = "TODO"
    )
@BuildDepends(embox.lib.libstdcxx)
@BuildDepends(sitl_lib)
@Build(stage=2)
module sitl {
	source "^BUILD/extbld/project/ardupilot/sitl_lib/install/arducopter.o"
	
	depends sitl_lib
	@NoRuntime depends embox.lib.libstdcxx
}
